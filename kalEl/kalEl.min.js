!function(){window.KalEl=KalEl=function(a,b,c){function G(a,c,d,e,f,h){for(var i,j=!0,m=0,n=arguments.length;m<n;m++)if(arguments[m]){j=!1;break}a?a.getHours?i=a:b.value?(i=new Date(b.value.getTime()),i.setFullYear(a)):i=new Date(a,0,1,0,0,0):j?i=null:b.displayValue?i=new Date(b.displayValue.getTime()):(i=new Date,i.setHours(0),i.setMinutes(0),i.setSeconds(0)),i&&(c&&i.setMonth(c),d&&i.setDate(d),e&&i.setHours(e),f&&i.setMinutes(f),h&&i.setSeconds(h)),l&&(b.value===i||b.value&&i&&b.value.getTime()===i.getTime())||b.onDateChanging&&!b.onDateChanging.call(k,g,b.value,i)||(b.value=i,H(i),b.onDateChanged&&b.onDateChanged.call(k,g,b.value))}function H(a,c,d,e,f,g){function m(){function k(a){if("string"!=typeof a)return i=null,!1;switch(a[0]){case"+":i="add";break;case"-":i="rem";break;default:i=null}return!!i}var i,j,h=b.displayValue&&b.displayValue.getTime?new Date(b.displayValue.getTime()):new Date;k(a)&&("add"===i&&(h.setFullYear(h.getFullYear()+1),j=!0),"rem"===i&&(h.setFullYear(h.getFullYear()-1),j=!0)),k(c)&&("add"===i&&(h.setMonth(h.getMonth()+1),j=!0),"rem"===i&&(h.setMonth(h.getMonth()-1),j=!0)),j&&(a=h,c=null,d=null,e=null,f=null,g=null)}for(var h,i=!0,k=0,l=arguments.length;k<l;k++)if(arguments[k]){i=!1;break}m(),a?a.getHours?h=new Date(a.getTime()):b.displayValue?(h=new Date(b.displayValue.getTime()),h.setFullYear(a)):h=new Date(a,0,1,0,0,0):i?h=null:b.displayValue?h=new Date(b.displayValue.getTime()):(h=new Date,h.setHours(0),h.setMinutes(0),h.setSeconds(0)),h&&(c&&h.setMonth(c),d&&h.setDate(d),e&&h.setHours(e),f&&h.setMinutes(f),b.seconds&&g&&h.setSeconds(g),b.seconds||h.setSeconds(0)),b.displayValue=h,h=h||new Date;var n=j.getElementsByClassName("cal-head-left")[0],o=j.getElementsByClassName("cal-head-right")[0];n.innerText=b.monthNames[h.getMonth()],o.innerText=h.getFullYear();for(var p,k=0,l=x.length;k<l;k++)p=x[k],p.getAttribute("data-year").toString()===h.getFullYear().toString()&&x[x.length-2].focus();M(h),N(h)}function I(){ka(),H(null,"-1")}function J(){ka(),H(null,"+1")}function K(){ka(),G(new Date)}function L(){ka();var a=new Date;b.value&&(a.setHours(b.value.getHours()),a.setMinutes(b.value.getMinutes()),a.setSeconds(b.value.getSeconds())),H(a)}function M(a,c,d){var f,e=a;a&&a.getDate&&(e=a.getFullYear(),c=a.getMonth());var h=b.displayValue||b.value,i=h||new Date;e||(e=i.getFullYear()),c||(c=i.getMonth()),f||(h?h.getDate():1);for(var m,n,s,k=Ea(e,c),l="",o=g.params.value,p=new Date,q=k.dates[0],r=Ha(k.dates[k.dates.length-1]),d=d||R(q,r),t=[],u="",v="",w=0,x=k.dates.length;w<x;w++){if(n=k.dates[w],s=P(d,n,Ha(n)),t=[],u="",v="",s.length>0){v=b.formatDate(n);for(var y=0,z=s.length;y<z;y++)s[y].id&&t.push(s[y].id),s[y].title&&(v+="\r\n"+s[y].title+" @"+b.formatDateTime(s[y].start));u=' data-event-ids="'+t.join()+'"'}"function"==typeof b.tooltip||b.tooltip===!1?v="":v.length>0&&(v=' title="'+v+'"'),m=w<k.daysOffset-1?"pre":w>=k.daysInMonth+k.daysOffset-1?"post":"",o&&n.toDateString()===o.toDateString()&&(m+=" active"),n.toDateString()===p.toDateString()&&(m+=" today"),l+="<button"+v+u+' data-year="'+n.getFullYear()+'" data-month="'+n.getMonth()+'" data-date="'+n.getDate()+'" class="'+m+'" tabIndex="-1">'+(s.length>0?"<i>"+s.length+"</i>":"")+n.getDate()+"</button>"}var A=j.getElementsByClassName("cal-body-date-day")[0],B=A.getElementsByTagName("button");xa(B,"click",X),xa(B,"mouseover",Y),b.displayStart=new Date(q.getTime()),b.displayEnd=new Date(r.getTime());var C=j.getElementsByClassName("cal-body-date-day")[0];C.innerHTML=l,A=j.getElementsByClassName("cal-body-date-day")[0],B=A.getElementsByTagName("button"),wa(B,"click",X),wa(B,"mouseover",Y)}function N(a,c,d){function h(a,b,c){for(var d,e,f=0,g=a.length;f<g;f++)d=a[f],Aa(d,"active"),parseInt(d.innerText)===c&&(e=f%b,za(d,"active"));if(a.length>0){for(var h=0,i=20;h<i;h++)Aa(a[0].parentNode,"cal-offset-"+h);za(a[0].parentNode,"cal-column cal-offset-"+e)}}if(e){var g,f=a;a.getDate?(f=a.getHours(),c=a.getMinutes(),d=a.getSeconds(),g=a):g=new Date(a,c,d),null!=f&&void 0!=f&&h(t,4,f),null!=c&&void 0!=c&&h(r,10,c),b.seconds&&null!=d&&void 0!=d&&h(p,10,d)}}function O(){b.wrap&&(i=b.wrap),b.wrap||(b.wrap===!1?i=h.parentElement:(i=document.createElement("span"),Ba(i,h))),za(i,"cal-wrap"),j=document.createElement("div"),za(j,"cal "+(b.seconds===!1?"cal-seconds-off":"")),za(j,"cal-mode-"+b.mode),b.className&&za(j,b.className);var a=sa(),c='<div class="cal-head">   <div class="cal-head-left"></div>   <div class="cal-head-pager"><span class="cal-head-pager-prev">◄</span><span class="cal-head-pager-now">●</span><span class="cal-head-pager-next">►</span></div>   <div class="cal-head-right"></div></div><div class="cal-body">   <div class="cal-body-date">       <div class="cal-list-head">'+a.dayListShort+'</div>       <div class="cal-list cal-body-date-day"></div>   </div>'+("picker"===b.mode?'   <div class="cal-list cal-body-time-hour">       <div class="cal-list-head"></div>       <div class="cal-list-head-cancel">☓</div>       <div class="cal-column">'+a.hours+'       </div>   </div>   <div class="cal-list cal-body-time-minute">       <div class="cal-list-head"></div>       <div class="cal-list-head-cancel">☓</div>       <div class="cal-column">'+a.minutes+"       </div>   </div>"+(b.seconds?'   <div class="cal-list cal-body-time-second">       <div class="cal-list-head"></div>       <div class="cal-list-head-cancel">☓</div>       <div class="cal-column">'+a.seconds+"       </div>   </div>":""):"")+'   <div class="cal-list cal-body-months">'+a.monthsShort+"</div>"+("picker"===b.mode?'   <div class="cal-list cal-body-time"></div>':"")+'   <div class="cal-list cal-body-years">'+a.years+"</div></div>";j.innerHTML=c,i.appendChild(j),["auto","manual"].indexOf(b.visibility)===-1&&za(j,"cal-visible")}function P(a,b,c){for(var d,e=[],f=0,g=a.length;f<g;f++)d=a[f],(d.start>=b&&d.end<=c||d.start<=b&&d.end<=c&&d.end>=b||d.start>=b&&d.start<=c&&d.end>=c||d.start<=b&&d.end>=c)&&e.push(d);return e}function Q(a){a&&(a="[object Array]"!==Object.prototype.toString.call(a)?[a]:a.slice(),a=P(a,b.displayStart,b.displayEnd),0!==a.length&&M(null,null,a))}function R(a,c){if(b.events){var d=b.events;if("function"==typeof d){var e=b.events.call(k,g,new Date(a.getTime()),new Date(c.getTime()),Q);void 0!==e&&(d=e)}if("[object Array]"===Object.prototype.toString.call(d))return d.sort(function(a,b){return a-b}),d}return[]}function S(){H(this.getAttribute("data-year")),g.hideYears()}function T(){H(null,this.getAttribute("data-month")),g.hideMonths()}function U(){g.select(null,null,null,this.innerText),ca()}function V(){g.select(null,null,null,null,this.innerText),b.seconds?da():ga()}function W(){g.select(null,null,null,null,null,this.innerText),ga()}function X(){g.select(this.getAttribute("data-year"),this.getAttribute("data-month"),this.getAttribute("data-date"))}function Y(a){if(b.tooltip&&"function"==typeof b.tooltip){var c=new Date(a.target.getAttribute("data-year"),a.target.getAttribute("data-month"),a.target.getAttribute("data-date")),d=[];b.tooltip.call(k,g,c,d,a)}}function Z(a){var b=KalEl.current;b&&b!==g&&KalEl.current._hide(),b&&b!==g&&("auto"===b.params.visibility||"manual"===b.params.visibility&&b.params.hideOnLostFocus)&&KalEl.current.hide(),"manual"!==g.params.visibility&&g.show(),a.stopPropagation()}function $(a){a.relatedTarget!==g.kal&&("auto"===g.params.visibility||"manual"===g.params.visibility&&g.params.hideOnLostFocus)&&g.hide()}function _(){window.addEventListener("focusin",$),window.addEventListener("mouseup",$),i.addEventListener("focusin",Z),i.addEventListener("mouseup",Z),wa(F,"click",ga),wa(x,"click",S),wa(v,"click",T),e&&(wa(t,"click",U),wa(r,"click",V)),e&&y.addEventListener("click",fa),w.addEventListener("click",la),u.addEventListener("click",oa),e&&(C.addEventListener("click",ea),D.addEventListener("click",ca)),z.addEventListener("click",I),B.addEventListener("click",J),A.addEventListener("click",L),"INPUT"===h.tagName.toUpperCase()&&"TEXT"===h.type.toUpperCase()&&h.addEventListener("change",function(){var a=b.parseDateString(h.value);isNaN(a.getTime())?g.params.onDateChanged.call(k,g,g.params.value):G(a)}),p&&(wa(p,"click",W),E.addEventListener("click",da))}function aa(){window.removeEventListener("focusin",Z),window.removeEventListener("mouseup",Z),i.removeEventListener("focusin",$),i.removeEventListener("mouseup",$);var a=j.getElementsByClassName("cal-body-date-day")[0],b=a.getElementsByTagName("button");xa(b,"click",X),xa(b,"mouseover",Y),xa(x,"click",S),xa(v,"click",T),e&&(xa(F,"click",ga),xa(t,"click",U),xa(r,"click",V)),y.removeEventListener("click",fa),w.removeEventListener("click",la),u.removeEventListener("click",oa),e&&(C.removeEventListener("click",ea),D.removeEventListener("click",ca)),z.removeEventListener("click",I),B.removeEventListener("click",J),A.removeEventListener("click",L),p&&(xa(p,"click",W),E.removeEventListener("click",da)),j.remove()}function ba(a){switch(a){case"hour":C.innerHTML=b.labels[0],D.innerHTML=b.labelsShort[1],b.seconds&&(E.innerHTML=b.labelsShort[2]);break;case"minute":C.innerHTML=b.labels[0],D.innerHTML=b.labels[1],b.seconds&&(E.innerHTML=b.labelsShort[2]);break;case"second":C.innerHTML=b.labels[0],D.innerHTML=b.labels[1],b.seconds&&(E.innerHTML=b.labels[2]);break;default:C.innerHTML=b.labelsShort[0],D.innerHTML=b.labelsShort[1],b.seconds&&(E.innerHTML=b.labelsShort[2])}}function ca(){ba("minute"),za(s,"out"),Aa(s,"in"),za(q,"in"),Aa(q,"out"),b.seconds&&(za(o,"out"),Aa(o,"in"))}function da(){ba("second"),za(s,"out"),Aa(s,"in"),za(q,"out"),Aa(q,"in"),b.seconds&&(za(o,"in"),Aa(o,"out"))}function ea(){ba("hour"),za(s,"in"),Aa(s,"out"),Aa(q,"out in"),b.seconds&&Aa(o,"out in")}function fa(){qa(),na(),ea(),y.style.display="none"}function ga(){y.style.display="block",Aa(s,"in out"),Aa(q,"in out"),b.seconds&&Aa(o,"in out"),ba("none")}function ha(){ya(g.kalEl,"cal-visible")?ja():ia()}function ia(){KalEl.current=g,za(g.kalEl,"cal-visible"),g.kalEl.style.zIndex=Ga()}function ja(){e&&ga(),qa(),na(),Aa(g.kalEl,"cal-visible"),ra()}function ka(){e&&ga(),qa(),na()}function la(){ya(g.yearSelectEl,"cal-visible")?na():ma()}function ma(){e&&ga(),za(g.yearSelectEl,"cal-visible")}function na(){Aa(g.yearSelectEl,"cal-visible")}function oa(){ya(g.monthSelectEl,"cal-visible")?qa():pa()}function pa(){e&&ga(),za(g.monthSelectEl,"cal-visible")}function qa(){Aa(g.monthSelectEl,"cal-visible")}function ra(){g.kalEl.style.zIndex=""}function sa(){for(var a={years:"",hours:"",minutes:"",seconds:"",days:"",daysShort:"",dayList:"",dayListShort:"",months:"",monthsShort:"",monthList:"",monthListShort:""},c="function"==typeof b.years?b.years.call(k)||[]:b.years,d=0,e=24;d<e;d++)a.hours+='<button data-hour="'+d+'" tabIndex="-1">'+d+"</button>";for(var d=0,e=60;d<e;d++)a.minutes+='<button data-minute="'+d+'" tabIndex="-1">'+d+"</button>";for(var d=0,e=60;d<e;d++)a.seconds+='<button data-second="'+d+'" tabIndex="-1">'+d+"</button>";for(var d=0,f=0,e=b.dayNames.length;d<e;d++)f=(d+(b.weekStartsOnSun?0:1))%7,a.days+='<button data-day="'+f+'" tabIndex="-1">'+b.dayNames[f]+"</button>",a.daysShort+='<button data-day="'+f+'" tabIndex="-1">'+b.dayNamesShort[f]+"</button>",a.dayList+="<li>"+b.dayNames[d]+"</li>",a.dayListShort+="<li>"+b.dayNamesShort[f]+"</li>";a.dayList="<ul>"+a.dayList+"</ul>",a.dayListShort="<ul>"+a.dayListShort+"</ul>";for(var d=0,e=b.monthNames.length;d<e;d++)a.months+='<button data-month="'+d+'" tabIndex="-1">'+b.monthNames[d]+"</button>",a.monthsShort+='<button data-month="'+d+'" tabIndex="-1">'+b.monthNamesShort[d]+"</button>",a.monthList+="<li>"+b.monthNames[d]+"</li>",a.monthListShort+="<li>"+b.monthNamesShort[d]+"</li>";a.monthList="<ul>"+a.monthList+"</ul>",a.monthListShort="<ul>"+a.monthListShort+"</ul>";for(var d=0,e=c.length;d<e;d++)a.years+='<button data-year="'+c[d]+'" tabIndex="-1">'+c[d]+"</button>";return a}function wa(a,b,c){if(a)for(var d=0,e=a.length;d<e;d++)a[d].addEventListener(b,c)}function xa(a,b,c){if(a)for(var d=0,e=a.length;d<e;d++)a[d].removeEventListener(b,c)}function ya(a,b){var c=a.className.trim(),d=0===c.indexOf(b)&&b.length===c.length,e=0===c.indexOf(b+" "),f=c.indexOf(" "+b)===c.length-b.length-1,g=c.indexOf(" "+b+" ")>-1;return d?"only":e?"start":f?"end":!!g&&"contain"}function za(a,b){for(var d,c=b.trim().split(" "),e=0,f=c.length;e<f;e++)d=c[e].trim(),ya(a,d)||(a.className=(a.className+" "+d).trim());return a}function Aa(a,b){for(var d,e,c=b.trim().split(" "),f=0,g=c.length;f<g;f++)for(d=c[f].trim();ya(a,d);){for(;"only"===ya(a,d);)a.className="";for(;"start"===ya(a,d);)e=new RegExp(d+" "),a.className=a.className.replace(e,"");for(;"end"===ya(a,d);)e=new RegExp(" "+d),a.className=a.className.replace(e,"");for(;"contain"===ya(a,d);)e=new RegExp(" "+d+" ","g"),a.className=a.className.replace(e," ")}return a}function Ba(a,b){b.length||(b=[b]);for(var c=b.length-1;c>=0;c--){var d=c>0?a.cloneNode(!0):a,e=b[c],f=e.parentNode,g=e.nextSibling;d.appendChild(e),g?f.insertBefore(d,g):f.appendChild(d)}}function Ea(a,b){var c=new Date(a,b,1,0,0,0),d=c.getDay(),e=new Date(a,b+1,0,0,0,0).getDate();g.params.weekStartsOnSun?d+=1:(0===d&&(d=7),1===d&&(d=8)),c.setDate(c.getDate()-d);for(var f=[],h=0,i=42;h<i;h++)c.setDate(c.getDate()+1),f.push(new Date(c.getTime()));return{dates:f,daysInMonth:e,daysOffset:d}}function Fa(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function Ga(){for(var a=document.getElementsByTagName("*"),b=0,c=0;c<a.length;c++){var d=document.defaultView.getComputedStyle(a[c],null).getPropertyValue("z-index");15===a[c].style.zIndex&&(d=a[c].style.zIndex),d>b&&"auto"!=d&&(b=d)}return 1+b}function Ha(a){var b=new Date(a.getTime());return b.setHours(23),b.setMinutes(59),b.setSeconds(59),b}var d={weekStartsOnSun:!1,value:null,displayValue:Date.parse(a.value),seconds:!1,mode:"calendar",visibility:"auto",hideOnLostFocus:!1,wrap:null,labels:["Hour","Select Minute","Select Second"],labelsShort:["H","M","S"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],className:null,years:function(){for(var a=new Date,b=a.getFullYear(),c=[],d=b-10,e=b+10;d<=e;d++)c.push(d);return c},onDateChanging:function(a,b,c){return!0},onDateChanged:function(a,b){"INPUT"===this.tagName.toUpperCase()&&"TEXT"===this.type.toUpperCase()&&(this.value=a.params.formatDateTime(b))},parseDateString:function(a){return new Date(Date.parse(a))},formatDate:function(a){return a?a.toLocaleDateString():""},formatTime:function(a){return a?a.toLocaleTimeString():""},formatDateTime:function(a){return a?a.toLocaleString():""},events:function(a,b,c,d){},tooltip:!0};d.value=a.value?d.parseDateString(a.value):null,b=this.params=Fa(d,b);var e="picker"===b.mode,f="calendar"===b.mode;f&&(b.visibility="visible");var i,j,g=this,h=a,k=c||h,l=!1;O();var m=j.getElementsByClassName("cal-body-months")[0],n=j.getElementsByClassName("cal-body-years")[0],o=e&&b.seconds?j.getElementsByClassName("cal-body-time-second")[0]:null,p=o?o.getElementsByTagName("button"):null,q=e?j.getElementsByClassName("cal-body-time-minute")[0]:null,r=q?q.getElementsByTagName("button"):null,s=e?j.getElementsByClassName("cal-body-time-hour")[0]:null,t=s?s.getElementsByTagName("button"):null,u=j.getElementsByClassName("cal-head-left")[0],v=m.getElementsByTagName("button"),w=j.getElementsByClassName("cal-head-right")[0],x=n.getElementsByTagName("button"),y=j.getElementsByClassName("cal-body-time")[0],z=j.getElementsByClassName("cal-head-pager-prev")[0],A=j.getElementsByClassName("cal-head-pager-now")[0],B=j.getElementsByClassName("cal-head-pager-next")[0],C=e?s.getElementsByClassName("cal-list-head")[0]:null,D=e?q.getElementsByClassName("cal-list-head")[0]:null,E=e&&b.seconds?o.getElementsByClassName("cal-list-head")[0]:null,F=j.getElementsByClassName("cal-list-head-cancel");return _(),b.value&&b.value.getDate?G(b.value):H(b.displayValue&&b.displayValue.getDate?b.displayValue:new Date),e&&ba("none"),l=!0,this.kal=h,this.kalEl=j,this.kalElWrap=i,this.monthSelectEl=m,this.yearSelectEl=n,this.select=G,this.display=H,this.selectNow=K,this.displayNow=L,this.show=ia,this.hide=ja,this._hide=ra,this.toggle=ha,this.toggleMonths=oa,this.showMonths=pa,this.hideMonths=qa,this.toggleYears=la,this.showYears=ma,this.hideYears=na,this.destroy=aa,this}}();