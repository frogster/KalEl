!function(){window.KalEl=KalEl=function(e,t,a){function n(e,a,n,s,i,o){for(var r,c=!0,d=0,u=arguments.length;u>d;d++)if(arguments[d]){c=!1;break}e?e.getHours?r=e:t.value?(r=new Date(t.value.getTime()),r.setFullYear(e)):r=new Date(e,0,1,0,0,0):c?r=null:t.displayValue?r=new Date(t.displayValue.getTime()):(r=new Date,r.setHours(0),r.setMinutes(0),r.setSeconds(0)),r&&(a&&r.setMonth(a),n&&r.setDate(n),s&&r.setHours(s),i&&r.setMinutes(i),o&&r.setSeconds(o)),rt&&(t.value===r||t.value&&r&&t.value.getTime()===r.getTime())||(!t.onDateChanging||t.onDateChanging.call(ot,st,t.value,r))&&(t.value=r,l(r),t.onDateChanged&&t.onDateChanged.call(ot,st,t.value))}function l(e,a,n,l,s,i){function o(){function o(e){if("string"!=typeof e)return r=null,!1;switch(e[0]){case"+":r="add";break;case"-":r="rem";break;default:r=null}return r?!0:!1}var r,c,d=t.displayValue?new Date(t.displayValue.getTime()):new Date;o(e)&&("add"===r&&(d.setFullYear(d.getFullYear()+1),c=!0),"rem"===r&&(d.setFullYear(d.getFullYear()-1),c=!0)),o(a)&&("add"===r&&(d.setMonth(d.getMonth()+1),c=!0),"rem"===r&&(d.setMonth(d.getMonth()-1),c=!0)),c&&(e=d,a=null,n=null,l=null,s=null,i=null)}for(var r,u=!0,m=0,h=arguments.length;h>m;m++)if(arguments[m]){u=!1;break}o(),e?e.getHours?r=new Date(e.getTime()):t.displayValue?(r=new Date(t.displayValue.getTime()),r.setFullYear(e)):r=new Date(e,0,1,0,0,0):u?r=null:t.displayValue?r=new Date(t.displayValue.getTime()):(r=new Date,r.setHours(0),r.setMinutes(0),r.setSeconds(0)),r&&(a&&r.setMonth(a),n&&r.setDate(n),l&&r.setHours(l),s&&r.setMinutes(s),t.seconds&&i&&r.setSeconds(i),t.seconds||r.setSeconds(0)),t.displayValue=r,r=r||new Date;var v=lt.getElementsByClassName("cal-head-left")[0],g=lt.getElementsByClassName("cal-head-right")[0];v.innerText=t.monthNames[r.getMonth()],g.innerText=r.getFullYear();for(var y,m=0,h=Et.length;h>m;m++)y=Et[m],y.getAttribute("data-year").toString()===r.getFullYear().toString()&&Et[Et.length-2].focus();c(r),d(r)}function s(){I(),l(null,"-1")}function i(){I(),l(null,"+1")}function o(){I(),n(new Date)}function r(){I();var e=new Date;t.value&&(e.setHours(t.value.getHours()),e.setMinutes(t.value.getMinutes()),e.setSeconds(t.value.getSeconds())),l(e)}function c(e,a,n){var l,s=e;e&&e.getDate&&(s=e.getFullYear(),a=e.getMonth());var i=t.displayValue||t.value,o=i||new Date;s||(s=o.getFullYear()),a||(a=o.getMonth()),l||(i?i.getDate():1);for(var r,c,d,u=G(s,a),h="",g=st.params.value,y=new Date,f=u.dates[0],p=$(u.dates[u.dates.length-1]),n=n||v(f,p),b=[],N="",D="",L=0,w=u.dates.length;w>L;L++){if(c=u.dates[L],d=m(n,c,$(c)),b=[],N="",D="",d.length>0){D=t.formatDate(c);for(var T=0,k=d.length;k>T;T++)d[T].id&&b.push(d[T].id),d[T].title&&(D+="\r\n"+d[T].title+" @"+t.formatDateTime(d[T].start));N=' data-event-ids="'+b.join()+'"'}"function"==typeof t.tooltip||t.tooltip===!1?D="":D.length>0&&(D=' title="'+D+'"'),r=L<u.daysOffset-1?"pre":L>=u.daysInMonth+u.daysOffset-1?"post":"",g&&c.toDateString()===g.toDateString()&&(r+=" active"),c.toDateString()===y.toDateString()&&(r+=" today"),h+="<button"+D+N+' data-year="'+c.getFullYear()+'" data-month="'+c.getMonth()+'" data-date="'+c.getDate()+'" class="'+r+'" tabIndex="-1">'+(d.length>0?"<i>"+d.length+"</i>":"")+c.getDate()+"</button>"}var M=lt.getElementsByClassName("cal-body-date-day")[0],C=M.getElementsByTagName("button");R(C,"click",E),R(C,"mouseover",S),t.displayStart=new Date(f.getTime()),t.displayEnd=new Date(p.getTime());var x=lt.getElementsByClassName("cal-body-date-day")[0];x.innerHTML=h,M=lt.getElementsByClassName("cal-body-date-day")[0],C=M.getElementsByTagName("button"),P(C,"click",E),P(C,"mouseover",S)}function d(e,a,n){function l(e,t,a){for(var n,l,s=0,i=e.length;i>s;s++)n=e[s],_(n,"active"),parseInt(n.innerText)===a&&(l=s%t,X(n,"active"));if(e.length>0){for(var o=0,r=20;r>o;o++)_(e[0].parentNode,"cal-offset-"+o);X(e[0].parentNode,"cal-column cal-offset-"+l)}}if(tt){var s,i=e;e.getDate?(i=e.getHours(),a=e.getMinutes(),n=e.getSeconds(),s=e):s=new Date(e,a,n),null!=i&&void 0!=i&&l(yt,4,i),null!=a&&void 0!=a&&l(vt,10,a),t.seconds&&null!=n&&void 0!=n&&l(mt,10,n)}}function u(){t.wrap&&(nt=t.wrap),t.wrap||(t.wrap===!1?nt=it.parentElement:(nt=document.createElement("span"),q(nt,it))),X(nt,"cal-wrap"),lt=document.createElement("div"),X(lt,"cal "+(t.seconds===!1?"cal-seconds-off":"")),X(lt,"cal-mode-"+t.mode),t.className&&X(lt,t.className);var e=z(),a='<div class="cal-head"><div class="cal-head-left"></div><div class="cal-head-pager"><span class="cal-head-pager-prev">◄</span><span class="cal-head-pager-now">●</span><span class="cal-head-pager-next">►</span></div><div class="cal-head-right"></div></div><div class="cal-body"><div class="cal-body-date"><div class="cal-list-head">'+e.dayListShort+'</div><div class="cal-list cal-body-date-day"></div></div>'+("picker"===t.mode?' <div class="cal-list cal-body-time-hour"><div class="cal-list-head"></div><div class="cal-list-head-cancel">☓</div><div class="cal-column">'+e.hours+' </div></div><div class="cal-list cal-body-time-minute"><div class="cal-list-head"></div><div class="cal-list-head-cancel">☓</div><div class="cal-column">'+e.minutes+" </div></div>"+(t.seconds?' <div class="cal-list cal-body-time-second"><div class="cal-list-head"></div><div class="cal-list-head-cancel">☓</div><div class="cal-column">'+e.seconds+" </div></div>":""):"")+' <div class="cal-list cal-body-months">'+e.monthsShort+"</div>"+("picker"===t.mode?' <div class="cal-list cal-body-time"></div>':"")+' <div class="cal-list cal-body-years">'+e.years+"</div></div>";lt.innerHTML=a,nt.appendChild(lt),-1===["auto","manual"].indexOf(t.visibility)&&X(lt,"cal-visible")}function m(e,t,a){for(var n,l=[],s=0,i=e.length;i>s;s++)n=e[s],(n.start>=t&&n.end<=a||n.start<=t&&n.end<=a&&n.end>=t||n.start>=t&&n.start<=a&&n.end>=a||n.start<=t&&n.end>=a)&&l.push(n);return l}function h(e){e&&(e="[object Array]"!==Object.prototype.toString.call(e)?[e]:e.slice(),e=m(e,t.displayStart,t.displayEnd),0!==e.length&&c(null,null,e))}function v(e,a){if(t.events){var n=t.events;if("function"==typeof n){var l=t.events.call(ot,st,new Date(e.getTime()),new Date(a.getTime()),h);void 0!==l&&(n=l)}if("[object Array]"===Object.prototype.toString.call(n))return n.sort(function(e,t){return e-t}),n}return[]}function g(){l(this.getAttribute("data-year")),st.hideYears()}function y(){l(null,this.getAttribute("data-month")),st.hideMonths()}function f(){st.select(null,null,null,this.innerText),k()}function p(){st.select(null,null,null,null,this.innerText),t.seconds?M():B()}function b(){st.select(null,null,null,null,null,this.innerText),B()}function E(){st.select(this.getAttribute("data-year"),this.getAttribute("data-month"),this.getAttribute("data-date"))}function S(e){if(t.tooltip&&"function"==typeof t.tooltip){var a=new Date(e.target.getAttribute("data-year"),e.target.getAttribute("data-month"),e.target.getAttribute("data-date")),n=[];t.tooltip.call(ot,st,a,n,e)}}function N(e){var t=KalEl.current;t&&t!==st&&KalEl.current._hide(),t&&t!==st&&("auto"===t.params.visibility||"manual"===t.params.visibility&&t.params.hideOnLostFocus)&&KalEl.current.hide(),"manual"!==st.params.visibility&&st.show(),e.stopPropagation()}function D(e){e.relatedTarget!==st.kal&&("auto"===st.params.visibility||"manual"===st.params.visibility&&st.params.hideOnLostFocus)&&st.hide()}function L(){window.addEventListener("focusin",D),window.addEventListener("mouseup",D),nt.addEventListener("focusin",N),nt.addEventListener("mouseup",N),P(Mt,"click",B),P(Et,"click",g),P(pt,"click",y),tt&&(P(yt,"click",f),P(vt,"click",p)),tt&&St.addEventListener("click",x),bt.addEventListener("click",V),ft.addEventListener("click",J),tt&&(wt.addEventListener("click",C),Tt.addEventListener("click",k)),Nt.addEventListener("click",s),Lt.addEventListener("click",i),Dt.addEventListener("click",r),"INPUT"===it.tagName.toUpperCase()&&"TEXT"===it.type.toUpperCase()&&it.addEventListener("change",function(){var e=t.parseDateString(it.value);isNaN(e.getTime())?st.params.onDateChanged.call(ot,st,st.params.value):n(e)}),mt&&(P(mt,"click",b),kt.addEventListener("click",M))}function w(){window.removeEventListener("focusin",N),window.removeEventListener("mouseup",N),nt.removeEventListener("focusin",D),nt.removeEventListener("mouseup",D);var e=lt.getElementsByClassName("cal-body-date-day")[0],t=e.getElementsByTagName("button");R(t,"click",E),R(t,"mouseover",S),R(Et,"click",g),R(pt,"click",y),tt&&(R(Mt,"click",B),R(yt,"click",f),R(vt,"click",p)),St.removeEventListener("click",x),bt.removeEventListener("click",V),ft.removeEventListener("click",J),tt&&(wt.removeEventListener("click",C),Tt.removeEventListener("click",k)),Nt.removeEventListener("click",s),Lt.removeEventListener("click",i),Dt.removeEventListener("click",r),mt&&(R(mt,"click",b),kt.removeEventListener("click",M)),lt.remove()}function T(e){switch(e){case"hour":wt.innerHTML=t.labels[0],Tt.innerHTML=t.labelsShort[1],t.seconds&&(kt.innerHTML=t.labelsShort[2]);break;case"minute":wt.innerHTML=t.labels[0],Tt.innerHTML=t.labels[1],t.seconds&&(kt.innerHTML=t.labelsShort[2]);break;case"second":wt.innerHTML=t.labels[0],Tt.innerHTML=t.labels[1],t.seconds&&(kt.innerHTML=t.labels[2]);break;default:wt.innerHTML=t.labelsShort[0],Tt.innerHTML=t.labelsShort[1],t.seconds&&(kt.innerHTML=t.labelsShort[2])}}function k(){T("minute"),X(gt,"out"),_(gt,"in"),X(ht,"in"),_(ht,"out"),t.seconds&&(X(ut,"out"),_(ut,"in"))}function M(){T("second"),X(gt,"out"),_(gt,"in"),X(ht,"out"),_(ht,"in"),t.seconds&&(X(ut,"in"),_(ut,"out"))}function C(){T("hour"),X(gt,"in"),_(gt,"out"),_(ht,"out in"),t.seconds&&_(ut,"out in")}function x(){U(),A(),C(),St.style.display="none"}function B(){St.style.display="block",_(gt,"in out"),_(ht,"in out"),t.seconds&&_(ut,"in out"),T("none")}function H(){W(st.kalEl,"cal-visible")?O():F()}function F(){KalEl.current=st,X(st.kalEl,"cal-visible"),st.kalEl.style.zIndex=Z()}function O(){tt&&B(),U(),A(),_(st.kalEl,"cal-visible"),j()}function I(){tt&&B(),U(),A()}function V(){W(st.yearSelectEl,"cal-visible")?A():Y()}function Y(){tt&&B(),X(st.yearSelectEl,"cal-visible")}function A(){_(st.yearSelectEl,"cal-visible")}function J(){W(st.monthSelectEl,"cal-visible")?U():K()}function K(){tt&&B(),X(st.monthSelectEl,"cal-visible")}function U(){_(st.monthSelectEl,"cal-visible")}function j(){st.kalEl.style.zIndex=""}function z(){for(var e={years:"",hours:"",minutes:"",seconds:"",days:"",daysShort:"",dayList:"",dayListShort:"",months:"",monthsShort:"",monthList:"",monthListShort:""},a="function"==typeof t.years?t.years.call(ot)||[]:t.years,n=0,l=24;l>n;n++)e.hours+='<button data-hour="'+n+'" tabIndex="-1">'+n+"</button>";for(var n=0,l=60;l>n;n++)e.minutes+='<button data-minute="'+n+'" tabIndex="-1">'+n+"</button>";for(var n=0,l=60;l>n;n++)e.seconds+='<button data-second="'+n+'" tabIndex="-1">'+n+"</button>";for(var n=0,s=0,l=t.dayNames.length;l>n;n++)s=(n+(t.weekStartsOnSun?0:1))%7,e.days+='<button data-day="'+s+'" tabIndex="-1">'+t.dayNames[s]+"</button>",e.daysShort+='<button data-day="'+s+'" tabIndex="-1">'+t.dayNamesShort[s]+"</button>",e.dayList+="<li>"+t.dayNames[n]+"</li>",e.dayListShort+="<li>"+t.dayNamesShort[s]+"</li>";e.dayList="<ul>"+e.dayList+"</ul>",e.dayListShort="<ul>"+e.dayListShort+"</ul>";for(var n=0,l=t.monthNames.length;l>n;n++)e.months+='<button data-month="'+n+'" tabIndex="-1">'+t.monthNames[n]+"</button>",e.monthsShort+='<button data-month="'+n+'" tabIndex="-1">'+t.monthNamesShort[n]+"</button>",e.monthList+="<li>"+t.monthNames[n]+"</li>",e.monthListShort+="<li>"+t.monthNamesShort[n]+"</li>";e.monthList="<ul>"+e.monthList+"</ul>",e.monthListShort="<ul>"+e.monthListShort+"</ul>";for(var n=0,l=a.length;l>n;n++)e.years+='<button data-year="'+a[n]+'" tabIndex="-1">'+a[n]+"</button>";return e}function P(e,t,a){if(e)for(var n=0,l=e.length;l>n;n++)e[n].addEventListener(t,a)}function R(e,t,a){if(e)for(var n=0,l=e.length;l>n;n++)e[n].removeEventListener(t,a)}function W(e,t){var a=e.className.trim(),n=0===a.indexOf(t)&&t.length===a.length,l=0===a.indexOf(t+" "),s=a.indexOf(" "+t)===a.length-t.length-1,i=a.indexOf(" "+t+" ")>-1;return n?"only":l?"start":s?"end":i?"contain":!1}function X(e,t){for(var a,n=t.trim().split(" "),l=0,s=n.length;s>l;l++)a=n[l].trim(),W(e,a)||(e.className=(e.className+" "+a).trim());return e}function _(e,t){for(var a,n,l=t.trim().split(" "),s=0,i=l.length;i>s;s++)for(a=l[s].trim();W(e,a);){for(;"only"===W(e,a);)e.className="";for(;"start"===W(e,a);)n=new RegExp(a+" "),e.className=e.className.replace(n,"");for(;"end"===W(e,a);)n=new RegExp(" "+a),e.className=e.className.replace(n,"");for(;"contain"===W(e,a);)n=new RegExp(" "+a+" ","g"),e.className=e.className.replace(n," ")}return e}function q(e,t){t.length||(t=[t]);for(var a=t.length-1;a>=0;a--){var n=a>0?e.cloneNode(!0):e,l=t[a],s=l.parentNode,i=l.nextSibling;n.appendChild(l),i?s.insertBefore(n,i):s.appendChild(n)}}function G(e,t){var a=new Date(e,t,1,0,0,0),n=a.getDay(),l=new Date(e,t+1,0,0,0,0).getDate();st.params.weekStartsOnSun?n+=1:(0===n&&(n=7),1===n&&(n=8)),a.setDate(a.getDate()-n);for(var s=[],i=0,o=42;o>i;i++)a.setDate(a.getDate()+1),s.push(new Date(a.getTime()));return{dates:s,daysInMonth:l,daysOffset:n}}function Q(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);return e}function Z(){for(var e=document.getElementsByTagName("*"),t=0,a=0;a<e.length;a++){var n=document.defaultView.getComputedStyle(e[a],null).getPropertyValue("z-index");15===e[a].style.zIndex&&(n=e[a].style.zIndex),n>t&&"auto"!=n&&(t=n)}return 1+t}function $(e){var t=new Date(e.getTime());return t.setHours(23),t.setMinutes(59),t.setSeconds(59),t}var et={weekStartsOnSun:!1,value:e.value?this.parseDateString(e.value):null,displayValue:Date.parse(e.value),seconds:!1,mode:"calendar",visibility:"auto",hideOnLostFocus:!1,wrap:null,labels:["Hour","Select Minute","Select Second"],labelsShort:["H","M","S"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],className:null,years:function(){for(var e=new Date,t=e.getFullYear(),a=[],n=t-10,l=t+10;l>=n;n++)a.push(n);return a},onDateChanging:function(){return!0},onDateChanged:function(e,t){"INPUT"===this.tagName.toUpperCase()&&"TEXT"===this.type.toUpperCase()&&(this.value=e.params.formatDateTime(t))},parseDateString:function(e){return new Date(Date.parse(e))},formatDate:function(e){return e?e.toLocaleDateString():""},formatTime:function(e){return e?e.toLocaleTimeString():""},formatDateTime:function(e){return e?e.toLocaleString():""},events:function(){},tooltip:!0};t=this.params=Q(et,t);var tt="picker"===t.mode,at="calendar"===t.mode;at&&(t.visibility="visible");var nt,lt,st=this,it=e,ot=a||it,rt=!1;u();var ct=lt.getElementsByClassName("cal-body-months")[0],dt=lt.getElementsByClassName("cal-body-years")[0],ut=tt&&t.seconds?lt.getElementsByClassName("cal-body-time-second")[0]:null,mt=ut?ut.getElementsByTagName("button"):null,ht=tt?lt.getElementsByClassName("cal-body-time-minute")[0]:null,vt=ht?ht.getElementsByTagName("button"):null,gt=tt?lt.getElementsByClassName("cal-body-time-hour")[0]:null,yt=gt?gt.getElementsByTagName("button"):null,ft=lt.getElementsByClassName("cal-head-left")[0],pt=ct.getElementsByTagName("button"),bt=lt.getElementsByClassName("cal-head-right")[0],Et=dt.getElementsByTagName("button"),St=lt.getElementsByClassName("cal-body-time")[0],Nt=lt.getElementsByClassName("cal-head-pager-prev")[0],Dt=lt.getElementsByClassName("cal-head-pager-now")[0],Lt=lt.getElementsByClassName("cal-head-pager-next")[0],wt=tt?gt.getElementsByClassName("cal-list-head")[0]:null,Tt=tt?ht.getElementsByClassName("cal-list-head")[0]:null,kt=tt&&t.seconds?ut.getElementsByClassName("cal-list-head")[0]:null,Mt=lt.getElementsByClassName("cal-list-head-cancel");return L(),t.value&&t.value.getDate?n(t.value):l(t.displayValue&&t.displayValue.getDate?t.displayValue:new Date),tt&&T("none"),rt=!0,this.kal=it,this.kalEl=lt,this.kalElWrap=nt,this.monthSelectEl=ct,this.yearSelectEl=dt,this.select=n,this.display=l,this.selectNow=o,this.displayNow=r,this.show=F,this.hide=O,this._hide=j,this.toggle=H,this.toggleMonths=J,this.showMonths=K,this.hideMonths=U,this.toggleYears=V,this.showYears=Y,this.hideYears=A,this.destroy=w,this}}();